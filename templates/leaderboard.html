{% extends "base.html" %}

{% block title %}排行榜{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center mb-4">英雄猜猜乐排行榜</h2>
    
    <!-- 游戏模式选择 -->
    <div class="text-center mb-4">
        <div class="btn-group" role="group">
            <a href="{{ url_for('leaderboard') }}?mode=all" 
               class="btn {% if game_mode == 'all' %}btn-primary{% else %}btn-outline-primary{% endif %}">
               全部游戏
            </a>
            <a href="{{ url_for('leaderboard') }}?mode=wangzhe" 
               class="btn {% if game_mode == 'wangzhe' %}btn-primary{% else %}btn-outline-primary{% endif %}">
               王者荣耀
            </a>
            <a href="{{ url_for('leaderboard') }}?mode=lol" 
               class="btn {% if game_mode == 'lol' %}btn-primary{% else %}btn-outline-primary{% endif %}">
               英雄联盟
            </a>
        </div>
    </div>

    <!-- 排行榜表格 -->
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>排名</th>
                    <th>头像</th>
                    <th>昵称</th>
                    <th>游戏次数</th>
                    <th>准确率</th>
                    <th>综合得分</th>
                </tr>
            </thead>
            <tbody>
                {% for player in leaderboard %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>
                        <div class="avatar-placeholder" 
                             style="width:40px;height:40px;border-radius:50%;background-color:#eee;display:flex;align-items:center;justify-content:center">
                            <span style="font-size:16px;color:#666">{{ player.username|first|upper }}</span>
                        </div>
                    </td>
                    <td>{{ player.username }}</td>
                    <td>{{ player.total_games }}</td>
                    <td>{{ "%.1f"|format(player.win_rate * 100) }}%</td>
                    <td>{{ "%.2f"|format(player.score) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}